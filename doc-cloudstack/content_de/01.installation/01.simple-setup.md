---
url: installation/einfaches-setup
next: /installation/setup-fuer-hoster/
prev: /installation/
title: Einfaches Setup
keywords: 
     - cloudstack 
     - einfaches setup
     - Installation 
     - Installation mobydick cloudstack
     - Setup einer cloud Lösung
description: Diese Anleitung richtet sich an Betreiber einer oder weniger mobydick Instanzen und begleitet Sie durch jeden Schritt der Installation.
toc: true
weight: 01

---

Der mobydick cloudstack skaliert vom Betrieb einer einzigen bis hin zu tausenden
mobydick Instanzen. Die Anforderungen an das Setup steigen entsprechend. Diese
Anleitung richtet sich an Betreiber einer oder weniger mobydick Instanzen.

## Systemvoraussetzungen

Den mobydick cloudstack können Sie entweder direkt auf x86-Hardware oder in
einer virtuellen Maschine betreiben.

Aktuell werden folgende Hypervisoren unterstützt:

+ VMWare ESX

### Ermittlung RAM-Bedarf

Der limitierende Faktor einer cloudstack Installation ist in der Regel nicht
die CPU oder Festplatte eines System sondern der RAM.

Der RAM-Bedarf wird wie folgt ermittelt:

> **2048 MB** System + **512 MB** x Anzahl mobydick Instanzen + **512 MB** x Anzahl Proxies

In diesem einfachen Setup werden wir nur einen Proxy benötigen. Wenn Sie
beispielsweise maximal fünf mobydick Instanzen hochfahren möchten benötigen Sie:

> 2048 MB System + 512 MB x **5** + 512 MB x 1 = **5.120 MB RAM**

{{% notice tip %}}
Die **512 MB RAM** pro mobydick Instanz ist ein durchschnittlicher (eher
konservativer) **Richtwert**. Dieser kann nach Art und Umfang Ihrer Instanzen- , Benutzeranzahl, etc. entsprechend variieren.
{{% /notice %}}

### Netzwerk vorbereiten

![Netzwerk Setup Beispiel](/cloudstack_installation_simple-setup_external_ip.png)

Prinzipiell kann der cloudstack selbst und jeder Proxy eine eigene IP-Adresse
sowie eigene Sicherheitseinstellungen haben.

In unserem einfachen Setup beschränken wir uns jedoch auf einen Proxy und eine
einzige interne IP-Adresse für das ganze System. Zugriffe von außen werden per
Port-Forwarding (DNAT) auf den cloudstack weiter geleitet.

#### IP Adressen

Sie benötigen eine beliebige interne IP-Adresse und eine öffentliche IP-Adresse
für die Anbindung von Teilnehmern über das Internet.

Die öffentliche IP-Adresse sollte statisch sein, bzw. über einen dynamischen DNS-Eintrag verfügen.

#### Firewall Anpassungen

Folgende Ports müssen von der externen IP-Adresse (z.B. 81.27.56.23) auf die
interne IP-Adresse (z.B. 192.168.0.10) weitergeleitet werden:

| Port | Beschreibung |
| ---- | ------------ |
| TCP **8884**  | Provisionierung der IP-Telefone |
| TCP **5222** | mobydick Desktop- und Mobile-Client-Zugriffe |
| TCP **5061** | SIP-TLS - sichere SIP-Kommunikation |
| UDP **30000 - 35000** | SRTP - verschlüsselte Sprachdaten |
| TCP **443** | Management-UIs der mobydick Instanzen (falls gewünscht) |

## Installation

### Installationsmedium besorgen

Das aktuelle cloudstack ISO steht offiziell im Download-Bereich unserer Homepage
zum Herunterladen zur Verfügung.

Wollen Sie den cloudstack in einer virtuellen Maschine betreiben, können Sie das
ISO direkt als Installationsmedium verwenden.

Für eine Installation auf x86-Hardware erzeugen Sie aus dem ISO bitte entweder
eine CD/DVD oder einen USB-Stick als Installationsmedium.

### Setup durchführen

Booten Sie die Maschine vom Installationsmedium.

Während des Setup-Prozesses folgen Sie bitte den Anweisungen am Bildschirm.

#### Netzwerk

Vergeben Sie hier die Einstellungen und die IP-Adresse aus Ihrem lokalen Netzwerk.
Unter dieser IP-Adresse stehen später alle Komponenten des cloudstack zur
Verfügung.

#### Festplatte
{{% notice warning %}}
Der cloudstack löscht während des Setups alle auf der Festplatte befindlichen
Daten!
{{% /notice %}}

### Initialisierung

Nach dem Reboot ist das Setup beendet und Sie können mit der Initialisierung
über die Weboberfläche fortfahren.

Der Zugriff erfolgt über `https` und den port `8443`. Dies können Sie auch
dem Willkommens-Bildschirm der cloudstack Konsole entnehmen. In unserem Beispiel:

```
Welcome to the mobydick cloudstack

In order to access the webui, please visit https://192.168.0.10:8443
```

Geben Sie die URL `https://192.168.0.10:8443` (IP-Adresse entsprechend anpassen)
in Ihren Browser ein.

#### Zertifikate

{{% notice tip %}}
Solange Sie keine offiziellen Zertifikate in den cloudstack installieren wird Ihr
Browser die Verbindung als unsicher einstufen. Je nach Browser können Sie
Ausnahmen hinzufügen. Für das einfache Setup sind keine offiziellen Zertifikate
notwendig.
{{% /notice %}}

#### Admin-Benutzer

Der cloudstack wird Sie nun zur Vergabe des `admin` Passwortes auffordern. Den
`admin` können Sie sowohl für die cloudstack Web-UI als auch für den Login per
ssh verwenden.

#### mobydick Instanz

Neben dem ersten Proxy legt der Assistent auch gleichzeitig die erste mobydick
Instanz an. Als Instanzname bietet sich z. B. Ihr Firmenname oder der des ersten
Kunden an.

Der Instanzname ist später auch Bestandteil der URL um auf diese mobydick
zuzugreifen (z. B. `https://192.168.0.10/instanzname`) oder muss vom Endbenutzer
bei der Anmeldung am mobydick Client mit angegeben werden
(z. B. `benutzer@instanzname`).

Der Instanzname ist also für jeden Benutzer sichtbar und sollte daher sorgsam
gewählt werden. Eine spätere Änderung des Instanznamen ist nicht möglich. Jedoch
können Sie die Instanz löschen, eine neue anlegen und die Daten per Backup
übertragen.

Später können Sie jederzeit weitere Instanzen hinzufügen.

#### Initialisierung abschließen

Sobald der Assistent seine Arbeit abgeschlossen hat werden Sie zur Login-Maske
weiter geleitet. Dort können Sie sich mit dem zuvor erstellen `admin` Benutzer
anmelden.

## cloudstack Komponenten

Der cloudstack verfügt über eine Vielzahl von Komponenten. Diese wurden beim Setup
vorparametriert und können von Ihnen später angepasst werden. Dieser Abschnitt
gibt Ihnen den nötigen Überblick und bringt Ihnen durch Beispiele das Gesamtkonzept näher.

### Management Web-UI

```
https://192.168.0.10:8443
```
Das cloudstack Management ist über den Port `8443` erreichbar. Es steht
standardmäßig auf allen IP-Adressen, die auf physikalische Netzwerkkarten
gebunden sind, zur Verfügung.

Auf das Management Web-UI erfolgt in der Regel kein Zugriff durch Ihre Kunden.
Sie dient unter anderem der Verwaltung von mobydick Instanzen, Proxies
und Backups sowie dem Update aller Dienste und Instanzen.

### mobydick Instanzen

Jedem Kunden wird eine eigene mobydick Instanz zugeteilt. Man kann sich die
mobydick Instanzen auch als Mandanten vorstellen.

Der Vorteil gegenüber herkömmlichen Cloud-Lösungen ist, dass mit dem mobydick cloudstack jeder Kunde
isoliert wird und bei Bedarf sogar mit individuellen mobydick Versionen und Anpassungen
betrieben werden kann.

Jeder Kunde kann auf die mobydick Web-UI seiner mobydick Instanz über folgende
URL zugreifen (Port `443`):

```
https://192.168.0.10/instanzname
```

Der Zugriff auf eine Instanz wird automatisch über einen Proxy geleitet und kann
dort geregelt werden.

### Telefonie-Dienste

Die IP-Telefone der Kunden (egal ob Hard- oder Software) werden per SIP direkt
an der jeweiligen mobydick Instanz angemeldet. Die gesamte
Kommunikation erfolgt über einen Proxy und kann dort geregelt werden.

Standardmäßig sind ausschließlich verschlüsselte Verbindungen erlaubt:

| Port | Beschreibung |
| ---- | ------------ |
| TCP **5061** | SIP-TLS - sichere SIP-Kommunikation |
| UDP **30000 - 35000** | SRTP - verschlüsselte Sprachdaten |

## Testen

Das Setup ist nun abgeschlossen und der cloudstack betriebsbereit. Die folgenden
Tests helfen Ihnen dabei den cloudstack besser kennen zu lernen und die
Netzwerkkonfiguration zu validieren.

### Zugriff auf die erste mobydick Instanz

Mit der URL `https://192.168.0.10/instanzname` sollten Sie auf die mobydick
Web-UI der ersten Instanz zugreifen können. Melden Sie sich dort mit dem
Benutzernamen `admin` und dem Passwort `mobydick` an.

#### Admin Passwort ändern

In allen neu erstellen Instanzen wird dieser Benutzer automatisch angelegt.
Nutzen Sie daher die Gelegenheit und ändern das Passwort des `admin` für diese
Instanz ab.

Bearbeiten Sie hierzu im Menü `Benutzer > Benutzerliste` den `admin` Benutzer
und vergeben Sie ein neues Passwort.

Nach dem Speichern erscheint in der Job-Box (oben) ein entsprechender Eintrag
die Telefonie anzuwenden. Starten Sie den Job durch einen Klick auf den `grünen
 Haken` (Anwenden).

#### Benutzer anlegen

Legen Sie für die weiteren Test zwei neue Benutzer an. Mit den Benutzern werden
automatisch auch mobydick Softphones mit angelegt die Sie über den mobydick
Desktop-Client nutzen können.

#### Jobs Anwenden

Nach dem Speichern von Änderungen erscheint in der Job-Box (oben) ein
entsprechender Eintrag die Telefonie anzuwenden. Starten Sie den Job durch
einen Klick auf den `grünen Haken`.

### mobydick Client testen

Melden Sie sich von der mobydick Instanz ab. In der Anmeldemaske finden Sie
den Tab **Service**. Laden Sie hier den mobydick Desktop-Client für Windows,
Mac oder Linux herunter und installieren Sie diesen.

#### Benutzer anmelden

Nach der Installation starten Sie den mobydick Desktop-Client. Sie werden
aufgefordert folgende Daten anzugeben

| Feld | Beschreibung | Beispiel |
| --- | --- | --- |
| Benutzername | benuterzname@mobydick-instanzname | mpasquay@pascom |
| Passwort | Das Passwort des Benutzers | ****** |
| Server | DNS Name des Proxies | 192.168.0.10 |

Wiederholen Sie den Vorgang für den zweiten Benutzer an einem anderen
Arbeitsplatz.

#### Audio-Hardware konfigurieren

Gehen Sie im mobydick Client auf `Einstellungen > mobydick Softphone` und
konfigurieren Sie die Audio-Hardware entsprechend. Schließen Sie ggf. ein
Headset an Ihren Computer.

#### Erstes Telefonat

Im mobydick Client sollten Sie jetzt jeweils den anderen Benutzer in der
Kontakt-Liste sehen. Durch Klicken auf den grünen Hörer rufen Sie den Benutzer an.
Testen Sie die Audio-Verbindung.

### IP-Telefon-Provisionierung Testen

Für die Hersteller snom, Yealink und Auerswald ist mobydick in der Lage
IP-Telefone automatisch und verschlüsselt zu konfigurieren.

#### Telefon anlegen

Loggen Sie sich in die mobydick Instanz ein und gehen zu `Endgeräte >
Geräteliste`. Dort fügen Sie ein neues IP-Telefon hinzu. Geben Sie die MAC-Adresse
des Telefones an und speichern Sie.

#### Provisionierungs-URL Kopieren

Markieren Sie das Telefon und wählen Sie `Aktionen > Provisioning URL`.
Das System zeigt Ihnen in einer Liste Provisionierungs-URLs für jeden Proxy an.
z. B.:
```
https://192.168.0.10:8884/p/xJyj5_l9R0s6OlOZh36GcY1ximO0x6qLa9UjVulaxYI=+
```

#### Provisionierungs-URL am Telefon eintragen

{{% notice tip %}}
Solange Sie keine offiziellen Zertifikate in den cloudstack installieren wird Ihr
Telefon die Verbindung evtl. als unsicher einstufen (z. B. Yealink). Die Telefone
haben oftmals eine Einstellung jedem Zertifikat zu vertrauen.
{{% /notice %}}

Browsen Sie nun auf das Web-UI des Telefones und tragen dort die URL ein. Das
Telefon sollte nun rebooten und steht anschließend dieser mobydick Instanz zur
Verfügung.

Nach erfolgreicher Provisionierung sollten Sie in der Geräteliste das genaue
Modell des Telefons sehen. Teilen Sie das Gerät nun einem Benutzer zu.
